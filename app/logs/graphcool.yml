types: ./types.graphql

functions:
  task-log-handle-error:
    type: subscription
    query: ./functions/handle-error/subscription.graphql
    handler:
      code:
        src: ./functions/handle-error/index.js
        environment:
          MAX_ERROR_COUNT: 10
          MAX_ERROR_DURATION: 30
  task-log-notify-when-error:
    type: subscription
    query: ./functions/notify-when-error/subscription.graphql
    handler:
      code:
        src: ./functions/notify-when-error/index.js
 
permissions:
- operation: TaskLog.read
  authenticated: true
  query: ./permissions/read.graphql
